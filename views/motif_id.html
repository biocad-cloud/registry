<!DOCTYPE html>

<html lang="en">

<head>
  ${./includes/head.html}

  <script type="text/json" id="sites">{$site}</script>
  <style type="text/css">
    /* 全局样式重置与基础设定 */
    :root {
      --bg-color: #f8f9fa;
      --card-bg: #ffffff;
      --text-primary: #333333;
      --text-secondary: #666666;
      --border-color: #d9d9d9;
      /*稍微深一点的边框色以适应紧凑模式*/

      /* 碱基颜色定义 */
      --color-A: #e53935;
      --color-T: #1e88e5;
      --color-C: #43a047;
      --color-G: #fb8c00;
    }

    /* 图例样式 */
    .legend {
      display: inline-flex;
      gap: 15px;
      background: var(--card-bg);
      padding: 8px 20px;
      border-radius: 4px;
      border: 1px solid var(--border-color);
      font-size: 14px;
      margin-bottom: 15px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    /* 主容器样式 */
    #visualization-container {
      max-width: 85%;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 0;
      /* 【修改点1】取消行间距 */
      border: 1px solid var(--border-color);
      /* 【修改点2】给整体加外框 */
      border-radius: 4px;
      /* 整体微圆角 */
      overflow: hidden;
      /* 确保内部内容不溢出圆角 */
      background-color: var(--card-bg);
      max-height: 550px;
      overflow-y: auto;
    }

    /* 【新增】美化滚动条样式 (Webkit内核浏览器: Chrome, Edge, Safari) */
    #visualization-container::-webkit-scrollbar {
      width: 8px;
      /* 滚动条宽度 */
    }

    #visualization-container::-webkit-scrollbar-track {
      background: #f1f1f1;
      /* 轨道背景 */
    }

    #visualization-container::-webkit-scrollbar-thumb {
      background: #ccc;
      /* 滑块颜色 */
      border-radius: 4px;
    }

    #visualization-container::-webkit-scrollbar-thumb:hover {
      background: #aaa;
      /* 鼠标悬停滑块颜色 */
    }

    /* 单个序列行的样式 */
    .sequence-row {
      background-color: var(--card-bg);
      border: none;
      /* 【修改点3】移除默认边框 */
      border-bottom: 1px solid var(--border-color);
      /* 【修改点4】仅保留底部分割线 */
      border-radius: 0;
      /* 【修改点5】移除圆角，实现无缝拼接 */
      padding: 1px 0px 1px 20px;
      /* 稍微减小内边距以适应紧凑感 */
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background-color 0.2s;
      /* 移除 transform 动画 */
    }

    /* 最后一行移除底边框 */
    .sequence-row:last-child {
      border-bottom: none;
    }

    /* 鼠标悬停效果：仅改变背景色 */
    .sequence-row:hover {
      background-color: #fcfcfc;
    }

    /* 左侧名称区域 */
    .site-name {
      font-weight: 600;
      font-size: 15px;
      color: var(--text-secondary);
      min-width: 250px;
      flex-shrink: 0;
      text-align: right;
      /* 修改分割线样式，使其更细致 */
      border-right: 1px solid #eee;
      padding-right: 8px;
      margin-right: 20px;
    }

    /* 右侧序列区域 */
    .site-sequence {
      flex-grow: 1;
      font-family: "Courier New", Courier, monospace;
      font-size: 16px;
      /* 稍微调小字体 */
      letter-spacing: 1px;
      word-break: break-all;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
    }

    /* 碱基字符通用样式 */
    .base {
      display: inline-block;
      font-weight: bold;
      /* 移除 padding 以减少字符间距，视觉更紧凑 */
      /* padding: 2px 1px; */
      margin: 0 0.5px;
    }

    /* 具体碱基颜色类 */
    .base-A {
      color: var(--color-A);
    }

    .base-T {
      color: var(--color-T);
    }

    .base-C {
      color: var(--color-C);
    }

    .base-G {
      color: var(--color-G);
    }

    /* 响应式调整 */
    @media (max-width: 600px) {
      .sequence-row {
        flex-direction: column;
        align-items: flex-start;
      }

      .site-name {
        border-right: none;
        border-bottom: 1px solid #eee;
        padding-right: 0;
        padding-bottom: 8px;
        margin-right: 0;
        margin-bottom: 8px;
        width: 100%;
      }

      .site-sequence {
        font-size: 14px;
      }
    }
  </style>
</head>

<body class="index-page scrolled">
  ${./includes/nav.html}

  <br />
  <br />
  <br />
  <br />

  <main class="main">

    <section id="data" class="section">

      <!-- Section Title -->
      <div class="container section-title">
        <h2>{$name}</h2>
        <p>{$note}</p>
      </div><!-- End Section Title -->

      <div class="container">

        <h3>{$family}</h3>
        <div class="row">
          <div class="col" style="text-align: center;">
            <h1>核酸位点序列可视化</h1>
            <!-- 图例区域 -->
            <div class="legend">
              <div class="legend-item"><span class="legend-dot" style="background:var(--color-A)"></span> A</div>
              <div class="legend-item"><span class="legend-dot" style="background:var(--color-T)"></span> T</div>
              <div class="legend-item"><span class="legend-dot" style="background:var(--color-C)"></span> C</div>
              <div class="legend-item"><span class="legend-dot" style="background:var(--color-G)"></span> G</div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <!-- 结果显示区域 -->
            <div id="visualization-container">
            </div>

            <div class="section">
              <div class="section-title">数据统计</div>
              <div class="stats">
                <div class="stat-box">
                  <div class="stat-label">序列数量</div>
                  <div class="stat-value" id="seq-count">0</div>
                </div>
                <div class="stat-box">
                  <div class="stat-label">序列长度</div>
                  <div class="stat-value" id="seq-length">0</div>
                </div>
                <div class="stat-box">
                  <div class="stat-label">位点总数</div>
                  <div class="stat-value" id="total-sites">0</div>
                </div>
                <div class="stat-box">
                  <div class="stat-label">GC含量</div>
                  <div class="stat-value" id="gc-content">0%</div>
                </div>
              </div>
            </div>

            <div class="row" style="width:80%;">
              <div class="col">
                {$logo}
              </div>
            </div>
          </div>
        </div>

        <br />

        <h5>Organism Source</h5>

        <ul>
          <foreach @tax>
            <li><a href='/taxonomy/?id=@tax["id"]'>@tax["name"]</a></li>
          </foreach>
        </ul>

      </div>

    </section>


  </main>

  ${./includes/footer.html}
</body>

<script type="text/javascript" src="/resources/js/motif_sites.js"></script>

</html>