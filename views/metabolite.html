<!DOCTYPE html>

<html lang="en">

<head>
  ${./includes/head.html}

  <script id="smiles" type="plain/text">{$smiles}</script>
</head>

<body class="index-page scrolled">
  ${./includes/nav.html}

  <br />
  <br />
  <br />
  <br />

  <main class="main">

    <section id="data" class="section">

      <!-- Section Title -->
      <div class="container section-title">
        <h2>{$name} (<i>{$id}</i>)</h2>
        <p>{$topic}</p>
      </div><!-- End Section Title -->

      <div class="container">
        <div class="shadow p-3 mb-5 bg-body rounded">
          <h3>Metabolite Information</h3>

          <div class="row">
            <div class="col">
              <p>
                Formula: {$formula} ({$exact_mass})<br />
                SMILES: <code>{$smiles}</code>
              </p>

              {$synonyms}
            </div>
            <div class="col">
              <canvas id="smiles_drawer" width="400px" height="350px" role="img" focusable="false"></canvas>
            </div>
          </div>

          <h4>Note</h4>
          <p>{$note}</p>
        </div>

        <h3>DBLinks</h3>

        <ul>
          <li>CAS Registry Number: {$cas_id}</li>
          <li>PubChem CID: {$pubchem_cid}</li>
          <li>ChEBI: {$chebi_id}</li>
          <li>HMDB: {$hmdb_id}</li>
          <li>LipidMaps: {$lipidmaps_id}</li>
          <li>KEGG: {$kegg_id}</li>
          <li>BioCyc: {$biocyc}</li>
          <li>NCBI MeSH: {$mesh_id}</li>
          <li>Wikipedia: {$wikipedia}</li>
        </ul>

      </div>

    </section>


  </main>

  ${./includes/footer.html}
</body>

<script src="/resources/vendor/smiles-drawer.min.js"></script>
<script>
  let input = document.getElementById("smiles").innerText;
  let options = {
    width: 400,
    height: 350
  };

  console.log(input);

  // Initialize the drawer to draw to canvas
  let smilesDrawer = new SmilesDrawer.Drawer(options);
  // Alternatively, initialize the SVG drawer:
  // let svgDrawer = new SmilesDrawer.SvgDrawer(options);
  // Clean the input (remove unrecognized characters, such as spaces and tabs) and parse it
  SmilesDrawer.parse(input, function (tree) {
    // Draw to the canvas
    smilesDrawer.draw(tree, "smiles_drawer", "light", false);
    // Alternatively, draw to SVG:
    // svgDrawer.draw(tree, 'output-svg', 'dark', false);
  }, function (err) {
    console.log(err);
  });  
</script>

</html>